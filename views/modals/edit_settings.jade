include ../mixins/edit_modal_mixin

+edit_modal("/portfolio/settings", "edit-settings", "Edit Settings")
  .small-label Add company name
  .error#username-error
    div You must include a name for the company.
  input(type="text"  placeholder="Company name"  name="username"  id="username"  autocomplete="off")

  .small-label Enter your password
  .error#password-error
    div You must include a password for the company.
  input(type="password" placeholder="Password"  name="password"  id="password"  autocomplete="off")

  .small-label Confirm your password
  .error#password2-error
    div Your passwords don't match.
  input(type="password" placeholder="Confirm password"  name="password2"  id="password2"  autocomplete="off")
    
  //- Commented out calendar picker
  //- .col-lg-12: input(type="text" name='init_investmt_date' class='calendar_input' placeholder="Date of initial investment"  id="datepicker")

  .small-label Link to Crunchbase
  input(type="text" name="crunchbase_permalink", placeholder="Crunchbase permalink" id="permalink"  autocomplete="off")
    
  .small-label Owner(s)
  .checkbox-group
    input(type="checkbox" name="owners" id="Chris" value="Chris") 
    label(for="Chris") Chris
  .checkbox-group
    input(type="checkbox" name="owners" id="Drew" value="Drew") 
    label(for="Drew") Drew
  .checkbox-group
    input(type="checkbox" name="owners" id="Joe" value="Joe") 
    label(for="Joe") Joe


  script.

    // When add company form is submitted
    $('#add-company').submit(function() {

      // Initialize error tests
      var noUsername = ($('#username').val().trim() == ''),
          noPassword = ($('#password').val().trim() == ''),
          differentPasswords = ($('#password2').val() != $('#password').val());

      // Run handle error functions on error fields and tests
      // Store result in isValid variable
      var isValid = handleError($('#username-error div'), noUsername) &&
                    handleError($('#password-error div'), noPassword) &&
                    handleError($('#password2-error div'), differentPasswords);

      // Submit if form is valid
      return isValid;
      
    });

    // Given an error field and the potential error, decide whether or not
    // to display the error message & submit the form
    function handleError(error_field, error) {
      if(error) {
        error_field.show();
        return false;
      } else {
        error_field.hide();
        return true;
      }
    }






