extends layouts/settings_layout

block header
  .header-title Settings

block sidebar
  .sidebar-content
    .sidebar-tab Account
    .sidebar-tab Portfolio
    .sidebar-tab Changes

block content

  .small-label OWNERS
    for o in all_owners
      p #{o.name} 
        a: i.fa.fa-edit(data-toggle="modal" data-target="#edit-owner-form" id='edit-'+o.id)
      br

  a(data-toggle="modal" data-target="#add-owner-form")
    i.fa.fa-plus#add-owner-btn  Add owner

script.
  // grabs all_owners from routes & puts it into owners var
  var owners = !{JSON.stringify(all_owners)};

  /* iterate through owners' edit btns so that onclick, the form is
   * populated with that owner's info */
  for (var i = 0; i < owners.length; i++) {
    (function(n) {
      var o = owners[i];
      $('#edit-'+o._id).click(function() {

        $('#name').val(o.name);
        $('#email').val(o.email);
        $("input.edit:checkbox").each(function(){
          if (o.companies.indexOf($(this).val()) != -1){
            $(this).prop('checked', true);
          }
        });
        console.log(o._id);
        $('#id').val(o._id);
      });
    }(i))
  }